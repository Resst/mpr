%%%% This is the file with a chapter body from the SPbPU-BCI template  %%%%
%%%% Filled with the article content about TCP and law of minimum

\renewcommand{\chapterEnTitle}{Application of the Law of Minimum for TCP}
\renewcommand{\chapterRuTitle}{Закон минимума и анализ различий для приоритизации регрессионных тестов}
\setcounter{mychapternumber}{1}

\input{template_settings/ch_epigraph} % keep unmodified except for \label{ch-11} after paper acceptance
\begin{abstr}
{\normalfont \abstractnameENG.}
We present the classical VIKOR multi-criteria decision-making method together with two important extensions: interval VIKOR and fuzzy VIKOR. We discuss their theoretical foundations, applicability, advantages and limitations, and provide comparative insight into decision stability under uncertainty. A computational example illustrates interval and fuzzy modifications of VIKOR evaluation and ranking.
\par
{\normalfont \keywordsENG.}
VIKOR, MCDM, interval analysis, fuzzy sets.
\par
{\normalfont \abstractname.}
В работе рассматривается классический метод многокритериального принятия решений VIKOR, а также две его ключевые модификации: интервальный и нечеткий VIKOR. Излагаются теоретические основы методов, области применимости, особенности и ограничения, а также проводится сравнение устойчивости решений в условиях неопределённости. На иллюстративном примере демонстрируется выполнение и результаты интервальной и нечеткой модификации VIKOR.
\par
{\normalfont \keywords.}
VIKOR, многокритериальное принятие решений, интервальный анализ, нечеткие множества.
\end{abstr}

\begin{refsection}[my_folder/my_biblio.bib]

\section{Введение}

Метод VIKOR (\emph{VIseKriterijumska Optimizacija I Kompromisno Resenje}) был предложен Сергием Опричевичем как подход к многокритериальному принятию решений, ориентированный на нахождение \emph{компромиссного решения}, максимально близкого к идеальной точке. В отличие от методов, стремящихся к парето-оптимальным решениям, VIKOR фокусируется на ситуациях, где компромисс между критериями является предпочтительным.

Однако классическая версия метода предполагает, что значения критериев заданы в виде точных чисел. В реальных задачах часто присутствуют различные формы неопределённости: интервальные оценки показателей, экспертные оценки в форме языковых термов, нечеткие треугольные числа и др. Это приводило к необходимости расширить VIKOR.

Существуют две важные модификации:
\begin{itemize}
    \item \textbf{интервальный VIKOR}, предложенный в работе \cite{sayadi2009}, адаптирующий алгоритм к критериям, представленным через интервалы;
    \item \textbf{fuzzy VIKOR}, описанный, например, в работах \cite{wan2013, liu2017}, позволяющий работать с лингвистическими и нечеткими данными.
\end{itemize}

Сравнительный анализ различных версий VIKOR выполнен в статье \cite{chatterjee2016}, где показано, что интервальная и нечеткая модификации позволяют повысить устойчивость решений при наличии неопределенности.

Цель данной работы — систематизировать основные идеи интервальной и нечеткой модификаций VIKOR, показать отличие от классического алгоритма и продемонстрировать работу интервального и нечеткого VIKOR на примере, написанном на языке программирования python.

\section{Обзор метода VIKOR}\label{orig_vikor}

Метод VIKOR относится к классу многокритериальных подходов принятия решений и был предложен Опричевичем как способ получения компромиссного решения в ситуациях, где необходимо учитывать несколько конфликтующих критериев. Первоначально метод создавался для инженерных задач, требующих выбора оптимального варианта среди множества альтернатив с разнородными характеристиками. Основная идея метода заключается в нахождении решения, минимизирующего расстояние до идеальной точки и одновременно обеспечивающего баланс между улучшением средних показателей и уменьшением максимального отклонения. Метод основан на компромиссном программировании, но отличается тем, что явно использует процедуру поиска решения, приемлемого для большинства заинтересованных сторон, что делает его особенно полезным в задачах, предполагающих наличие противоречивых критериев.

VIKOR применяется в ситуациях, где требуется учитывать не только максимальную близость альтернативы к идеальному варианту, но и степень её доминирования по самому неблагоприятному критерию. Поэтому метод получил широкое применение в инженерии, инвестиционном анализе, экологии, управлении проектами и других областях, где невозможно достичь одновременной оптимизации всех целей. Преимуществом метода является способность сочетать стратегии минимизации наихудшего отклонения и максимизации интегральной пользы, что позволяет получать взвешенное компромиссное решение.

\subsection{Математическая постановка задачи}

Пусть задано множество альтернатив \(A = \{A_1, A_2, \dots, A_m\}\), каждая из которых оценивается по набору критериев \(C = \{c_1, c_2, \dots, c_n\}\). Определена матрица оценок \(f_{ij}\), где \(f_{ij}\) — значение альтернативы \(A_i\) по критерию \(c_j\). Для каждого критерия задан тип: выгодный (benefit), для которого большие значения предпочтительны, или затратный (cost), для которого предпочтительны меньшие значения. Также каждому критерию назначен весовой коэффициент \(w_j\), удовлетворяющий условию
\[
\sum_{j=1}^{n} w_j = 1.
\]

Для каждого критерия определяются лучшие и худшие значения среди всех альтернатив. Для выгодных критериев применяются выражения
\[
f_j^{*} = \max_{i} f_{ij}, \qquad f_j^{-} = \min_{i} f_{ij},
\]
а для затратных критериев
\[
f_j^{*} = \min_{i} f_{ij}, \qquad f_j^{-} = \max_{i} f_{ij}.
\]

Затем вычисляются две меры отклонения альтернативы от идеального решения. Первая мера представляет собой взвешенную сумму отклонений:
\[
S_i = \sum_{j=1}^{n} w_j \,\frac{f_j^{*} - f_{ij}}{f_j^{*} - f_j^{-}}.
\]
Вторая мера характеризует максимальное взвешенное отклонение по одному критерию:
\[
R_i = \max_{1\le j\le n} \left\{ w_j \,\frac{f_j^{*} - f_{ij}}{f_j^{*} - f_j^{-}} \right\}.
\]

Для получения компромиссного решения определяется интегральный индекс \(Q_i\):
\[
Q_i = v \cdot \frac{S_i - S^{*}}{S^{-} - S^{*}} + (1-v) \cdot \frac{R_i - R^{*}}{R^{-} - R^{*}},
\]
где
\[
S^{*} = \min_{i} S_i,\quad S^{-} = \max_{i} S_i,\qquad R^{*} = \min_{i} R_i,\quad R^{-} = \max_{i} R_i,
\]
а параметр \(v \in [0,1]\) отражает предпочтения относительно стратегий компромисса. Значение \(v = 0.5\) соответствует равному учёту обеих мер, приближение \(v \to 1\) подчеркивает ориентацию на минимизацию суммарных отклонений, а \(v \to 0\) — на минимизацию наибольшего отклонения.

Итоговое решение определяется альтернативой с минимальным значением \(Q_i\), однако процедура выбора включает дополнительные условия устойчивости. Если различие между лучшими альтернативами недостаточно велико или ранжирование по метрикам \(S\) и \(R\) противоречит индексу \(Q\), формируется не одна альтернатива, а набор компромиссных решений.

\section{Интервальная модификация метода VIKOR}


Как уже упоминалось в \ref{orig_vikor}, классический метод VIKOR предполагает, что оценки всех альтернатив по каждому
критерию представлены точечными значениями. Однако в реальных задачах
многокритериального анализа нередко встречаются ситуации, когда значения
критериев заданы неточно, являются приближёнными или варьируются в некотором
допустимом диапазоне. Такие ситуации типичны для инженерных,
экономических и экологических задач, в которых невозможно получить точные числа
из-за экспертной неопределённости, вариативности данных и измерительных ошибок.

Для учёта неопределённости авторы \cite{sayadi2009} предложили
интервальную модификацию метода VIKOR, в которой вместо точечных значений
используются интервальные оценки
\[
f_{ij} = [\, \underline{f}_{ij},\; \overline{f}_{ij} \,],
\]
где $\underline{f}_{ij}$ и $\overline{f}_{ij}$ обозначают нижнюю и верхнюю границы
возможного значения критерия. Такой подход позволяет работать с более гибкой
моделью данных и принимать решения, устойчивые к колебаниям входной информации.

\subsection{Математическая постановка интервального VIKOR} \label{interval_vikor_formulas}

Пусть задано множество альтернатив $A = \{A_1, \dots, A_m\}$, множество критериев
$C = \{c_1, \dots, c_n\}$ и интервальная матрица оценок
\[
f_{ij} = [\, \underline{f}_{ij},\; \overline{f}_{ij} \,].
\]
Каждый критерий относится к типу \emph{выгодный} или \emph{затратный}, а веса
$w_j$ удовлетворяют условию $\sum_{j=1}^{n} w_j = 1$.

Для интервальных данных определяются \emph{интервальные идеальные} и
\emph{антиидеальные точки}. Для выгодного критерия:
\[
f_j^{*} = 
\left[
\max_i \underline{f}_{ij},\;
\max_i \overline{f}_{ij}
\right], \qquad
f_j^{-} =
\left[
\min_i \underline{f}_{ij},\;
\min_i \overline{f}_{ij}
\right].
\]
Для затратного критерия:
\[
f_j^{*} = 
\left[
\min_i \underline{f}_{ij},\;
\min_i \overline{f}_{ij}
\right], \qquad
f_j^{-} =
\left[
\max_i \underline{f}_{ij},\;
\max_i \overline{f}_{ij}
\right].
\]

Далее необходимо определить интервальные меры отклонения. Интервальный
нормализованный разрыв альтернативы $A_i$ по критерию $c_j$ определяется как
\[
D_{ij} = 
\left[
\frac{f_j^{*\,(\text{low})} - \overline{f}_{ij}}{f_j^{*\,(\text{low})} - f_j^{-\,(\text{high})}},
\quad
\frac{f_j^{*\,(\text{high})} - \underline{f}_{ij}}{f_j^{*\,(\text{high})} - f_j^{-\,(\text{low})}}
\right],
\]
где использование противоположных концов интервалов обеспечивает
\emph{наиболее пессимистичную} и \emph{наиболее оптимистичную} оценки,
согласуясь с подходом Sayadi et al.

Интервальные показатели $S_i$ и $R_i$ вычисляются как:
\[
S_i =
\left[
\sum_{j=1}^{n} w_j\, D_{ij}^{(\text{low})},
\quad
\sum_{j=1}^{n} w_j\, D_{ij}^{(\text{high})}
\right],
\]
\[
R_i =
\left[
\max_{j} w_j\, D_{ij}^{(\text{low})},
\quad
\max_{j} w_j\, D_{ij}^{(\text{high})}
\right].
\]


\subsection{Особенности метода}

Интервальный VIKOR сохраняет структуру исходного метода, но адаптирует
все вычисления к интервальной арифметике. Основные особенности:

\begin{itemize}
	\item вместо точек используются интервалы значений, что делает метод чувствительным к неопределённости;
	\item нормализация использует ``наиболее широкое'' сочетание концов интервалов, что гарантирует корректную оценку в условиях неполных данных;
	\item результаты ранжирования также представляются интервалами и требуют процедуры сравнения интервальных чисел;
	\item метод может порождать частичные или нестрогие порядки, когда интервалы $Q_i$ альтернатив пересекаются.
\end{itemize}

\subsection{Недостатки и ограничения}

Несмотря на преимущества, интервальная модификация имеет ряд недостатков:

\begin{itemize}
	\item усложнение вычислений из-за необходимости поддерживать интервальную арифметику;
	\item увеличение числа случаев, когда альтернативы оказываются несравнимыми из-за пересечения интервалов;
	\item зависимость качества результата от корректного задания интервалов экспертами.
\end{itemize}

Тем не менее модификация доказала свою эффективность в задачах с высокой неопределённостью и стала основой для дальнейших расширений метода, включая fuzzy модификацию \cite{liu2017, wan2013}, о которой пойдет речь в \ref{fuzzy_modification}.

\subsection{Реализация интервальной модификации на Python}

Для практической демонстрации интервальной модификации метода VIKOR был использован
Python-код, реализующий шаги, описанные в работе \cite{sayadi2009}. 
В частности, реализация учитывает следующие ключевые моменты:

\begin{enumerate}
	\item каждая альтернатива $A_i$ имеет интервальные оценки по каждому критерию $c_j$:
	$f_{ij} = [\,\underline{f}_{ij}, \overline{f}_{ij}\,]$;
	\item вычисляются интервальные идеальные и антиидеальные точки $f_j^*$ и $f_j^-$,
	учитывая тип критерия (выгода или затраты);
	\item рассчитываются интервальные меры отклонения $D_{ij}$, нормализованные с использованием
	противоположных концов интервалов для пессимистичных и оптимистичных оценок;
	\item агрегируются интервальные показатели $S_i$ и $R_i$ по формулам:
	\[
	S_i = \sum_{j=1}^{n} w_j D_{ij}, \qquad
	R_i = \max_j w_j D_{ij};
	\]
	\item определяется интервальная величина $Q_i$ как взвешенная комбинация $S_i$ и $R_i$,
	с учётом коэффициента стратегии $v$;
	\item ранжирование альтернатив производится по центрам интервалов $Q_i$, при необходимости
	формируется компромиссный набор лучших альтернатив.
\end{enumerate}

Данная реализация полностью согласуется с формулами, представленными в пункте
\ref{interval_vikor_formulas}, и позволяет на практике оценивать устойчивость решений
к колебаниям входных данных.

На приведённом примере, включающем четыре альтернативы и три критерия, были получены
следующие результаты:

\begin{table}[htbp]
	\centering
	\caption{Идеальная и надирная точки интервалов}
	\begin{tabular}{lcc}
		\toprule
		Критерий & $f_j^*$ & $f_j^-$ \\
		\midrule
		1 & [0.800, 1.000] & [0.500, 0.700] \\
		2 & [0.800, 1.000] & [0.500, 0.700] \\
		3 & [0.500, 0.700] & [0.800, 1.000] \\
		\bottomrule
	\end{tabular}
\end{table}

\begin{table}[htbp]
	\centering
	\caption{Интервальные метрики S, R и Q для альтернатив}
	\begin{tabular}{lcccc}
	\hline
	Альтернатива & S-интервал & R-интервал & Q-интервал & Q\_center \\
	\hline
		A1 & [0.6667, 0.6667] & [0.3000, 0.3000] & [0.7500, 0.7500] & 0.7500 \\
		A2 & [0.4000, 0.4000] & [0.3000, 0.3000] & [0.3500, 0.3500] & 0.3500 \\
		A3 & [0.6000, 0.6000] & [0.4000, 0.4000] & [0.9000, 0.9000] & 0.9000 \\
		A4 & [0.3333, 0.3333] & [0.2000, 0.2000] & [0.0000, 0.0000] & 0.0000 \\
		\bottomrule
	\end{tabular}
\end{table}

\begin{table}[htbp]
	\centering
	\caption{Ранжирование альтернатив по интервальной метрике Q}
	\begin{tabular}{lc}
		\toprule
		Ранжирование & Лучшая альтернатива \\
		\midrule
		A4 → A2 → A1 → A3 & A4 \\
		\bottomrule
	\end{tabular}
\end{table}

Анализ полученных результатов показывает, что интервальная модификация позволяет:
\begin{itemize}
	\item выявить компромиссные альтернативы даже при колебаниях значений критериев;
	\item формировать устойчивое ранжирование, при этом лучшая альтернатива (A4) 
	сохраняется при различных значениях коэффициента стратегии $v$;
	\item настраивать степень влияния предпочтений через параметр $v$, что отражено
	в анализе чувствительности (лучшие альтернативы изменяются при $v = 0.7$ и $1.0$,
	формируя компромиссные наборы A4+A2).
\end{itemize}

\section{Нечёткая (fuzzy) модификация метода VIKOR} \label{fuzzy_modification}

В ряде практических задач исходные данные содержат неопределённость, которую невозможно корректно описать только интервалами. В таких случаях применяется нечеткая (fuzzy) модификация метода VIKOR, предложенная в~\cite{Opricovic2011}. В этой версии критерии и веса допускают неопределённость, выражаемую \emph{треугольными нечеткими числами} (TFN). Нечеткие оценки позволяют моделировать неточность экспертных суждений, а также различать нижнюю, наиболее вероятную и верхнюю оценку каждого параметра.

Треугольное нечеткое число определяется как
\[
\tilde{x} = \bigl(x^{\mathrm{L}},\, x^{\mathrm{M}},\, x^{\mathrm{U}}\bigr),
\]
где $x^{\mathrm{L}}$, $x^{\mathrm{M}}$ и $x^{\mathrm{U}}$ соответствуют нижней, модальной и верхней оценкам соответственно. Все операции в алгоритме выполняются покомпонентно, что обеспечивает корректность результата в нечеткой среде.

\subsubsection{Определение нечетких идеального и антиидеального решений}

Аналогично классическому VIKOR для каждого критерия определяются лучшие и худшие значения. Отличие заключается в том, что каждая оценка является TFN, а операции $\max$ и $\min$ применяются к соответствующим компонентам.

Для выгодных критериев:
\[
\tilde{f}_j^{*} = 
\left(
\max_i f_{ij}^{\mathrm{L}},
\max_i f_{ij}^{\mathrm{M}},
\max_i f_{ij}^{\mathrm{U}}
\right),
\qquad
\tilde{f}_j^{-} = 
\left(
\min_i f_{ij}^{\mathrm{L}},
\min_i f_{ij}^{\mathrm{M}},
\min_i f_{ij}^{\mathrm{U}}
\right).
\]

Для затратных критериев:
\[
\tilde{f}_j^{*} = 
\left(
\min_i f_{ij}^{\mathrm{L}},
\min_i f_{ij}^{\mathrm{M}},
\min_i f_{ij}^{\mathrm{U}}
\right),
\qquad
\tilde{f}_j^{-} = 
\left(
\max_i f_{ij}^{\mathrm{L}},
\max_i f_{ij}^{\mathrm{M}},
\max_i f_{ij}^{\mathrm{U}}
\right).
\]

\subsubsection{Нормирование нечетких расстояний}

Нечеткое расстояние альтернативы от идеального решения также является треугольным числом. В работе~\cite{Opricovic2011} предложена нормировка вида
\[
\tilde{d}_{ij} =
\left(
\frac{f_j^{\*\,\mathrm{L}} - f_{ij}^{\mathrm{U}}}{f_j^{\*\,\mathrm{U}} - f_j^{-\,\mathrm{L}}},
\;
\frac{f_j^{\*\,\mathrm{M}} - f_{ij}^{\mathrm{M}}}{f_j^{\*\,\mathrm{M}} - f_j^{-\,\mathrm{M}}},
\;
\frac{f_j^{\*\,\mathrm{U}} - f_{ij}^{\mathrm{L}}}{f_j^{\*\,\mathrm{L}} - f_j^{-\,\mathrm{U}}}
\right),
\]
что гарантирует сохранение структуры TFN.

\subsubsection{Нечеткие показатели $S_i$ и $R_i$}

Аналоги интегральной и максимальной меры отклонения определяются как

\[
\tilde{S}_i = 
\sum_{j=1}^n 
\bigl( \tilde{w}_j \otimes \tilde{d}_{ij} \bigr),
\]

\[
\tilde{R}_i = 
\max_j 
\bigl( \tilde{w}_j \otimes \tilde{d}_{ij} \bigr),
\]

где $\otimes$ обозначает покомпонентное умножение TFN, а максимум по критериям также определяется покомпонентно:
\[
\max\bigl((a^{\mathrm{L}},a^{\mathrm{M}},a^{\mathrm{U}}),(b^{\mathrm{L}},b^{\mathrm{M}},b^{\mathrm{U}})\bigr)
=
\bigl(
\max(a^{\mathrm{L}},b^{\mathrm{L}}),
\max(a^{\mathrm{M}},b^{\mathrm{M}}),
\max(a^{\mathrm{U}},b^{\mathrm{U}})
\bigr).
\]

\subsubsection{Дефаззификация и вычисление итогового показателя}

Поскольку результатом являются нечеткие числа, необходимо дефаззифицировать $\tilde{S}_i$ и $\tilde{R}_i$. В~\cite{Opricovic2011} применяется классическая дефаззификация треугольного числа:
\[
\mathrm{Defuzz}(\tilde{x}) = \frac{x^{\mathrm{L}} + x^{\mathrm{M}} + x^{\mathrm{U}}}{3}.
\]

Таким образом,
\[
S_i = \mathrm{Defuzz}(\tilde{S}_i), 
\qquad 
R_i = \mathrm{Defuzz}(\tilde{R}_i).
\]

После этого итоговый компромиссный показатель вычисляется по стандартной формуле VIKOR:
\[
Q_i = 
v\,\frac{S_i - S^{*}}{S^{-} - S^{*}}
+
(1-v)\,\frac{R_i - R^{*}}{R^{-} - R^{*}},
\]
где
\[
S^{*} = \min_i S_i,\quad 
S^{-} = \max_i S_i,\qquad
R^{*} = \min_i R_i,\quad 
R^{-} = \max_i R_i,
\]
а $v \in [0,1]$ — параметр компромисса.


\subsubsection{Итоговое ранжирование}

Окончательные решения выбираются по тем же критериям приемлемости преимущества и стабильности, что и в оригинальном методе VIKOR. Отличие заключается только в том, что все сравнения проводятся над дефаззифицированными значениями.

\subsection{Реализация fuzzy модификации на Python}

Для практической демонстрации нечеткой модификации метода VIKOR реализован класс \texttt{FuzzyVIKOR}, описывающий процедуру, предложенную в работе
Opricovic (2011)~\cite{Opricovic2011}. Ниже перечислены ключевые шаги
реализации и их соответствие формальному описанию метода.

\begin{enumerate}
	\item Представление данных: каждая альтернатива $A_i$ задаётся набором треугольных нечетких чисел (TFN) по каждому критерию $c_j$:
	\[
	\tilde f_{ij} = \bigl(f_{ij}^{\mathrm{L}}, f_{ij}^{\mathrm{M}}, f_{ij}^{\mathrm{U}}\bigr).
	\]
	В коде — трёхмерный массив \texttt{matrix} формы $(m,n,3)$.
	\item Идеальная и антиидеальная точки: для каждого критерия покомпонентно вычисляются
	\(\tilde f_j^{*}\) и \(\tilde f_j^{-}\) (L/M/U):
	\[
	\tilde{f}_j^{*} = 
	\begin{cases}
	(\max_i f_{ij}^{\mathrm{L}}, \max_i f_{ij}^{\mathrm{M}}, \max_i f_{ij}^{\mathrm{U}}), & \text{если } c_j \text{ — выгодный} \\
	(\min_i f_{ij}^{\mathrm{L}}, \min_i f_{ij}^{\mathrm{M}}, \min_i f_{ij}^{\mathrm{U}}), & \text{если } c_j \text{ — затратный}
	\end{cases}
	\]
	(в коде — массивы \texttt{ideal\_point} и \texttt{nadir\_point}).
	\item Нормализация нечетких расстояний: для каждой альтернативы и критерия формируется тройка компонент
	\(\tilde d_{ij}=(d_{ij}^{\mathrm{L}},d_{ij}^{\mathrm{M}},d_{ij}^{\mathrm{U}})\) по формулам, предложенным в~\cite{Opricovic2011}:
	\[
	\tilde{d}_{ij} =
	\left(
	\frac{f_j^{*\,\mathrm{L}} - f_{ij}^{\mathrm{U}}}{f_j^{*\,\mathrm{U}} - f_j^{-\,\mathrm{L}}},
	\;
	\frac{f_j^{*\,\mathrm{M}} - f_{ij}^{\mathrm{M}}}{f_j^{*\,\mathrm{M}} - f_j^{-\,\mathrm{M}}},
	\;
	\frac{f_j^{*\,\mathrm{U}} - f_{ij}^{\mathrm{L}}}{f_j^{*\,\mathrm{L}} - f_j^{-\,\mathrm{U}}}
	\right).
	\]
	В коде нормализованные значения сохраняются в массиве \texttt{normalized}.
	\item Вычисление нечетких $S$ и $R$: покомпонентное умножение нечетких весов \(\tilde w_j\)
	и нормализованных расстояний, агрегирование даёт:
	\[
	\tilde S_i = \sum_{j=1}^n \tilde w_j \otimes \tilde d_{ij}, \qquad
	\tilde R_i = \max_j \bigl( \tilde w_j \otimes \tilde d_{ij} \bigr).
	\]
	В реализации это массивы \texttt{S\_values} и \texttt{R\_values} размерности $(m,3)$.
	\item Дефаззификация: треугольные числа переводятся в скаляры; в классическом варианте Opricovic используется
	\(\mathrm{Defuzz}(\tilde x) = (x^{\mathrm{L}} + x^{\mathrm{M}} + x^{\mathrm{U}})/3\). В коде применяется дефаззификация
	(в коде производится усреднение компонент — в реализации присутствует вариант \((L+2M+U)/4\); для строгого соответствия статье
	рекомендуется использовать $(L+M+U)/3$). Дефаззифицированные $S_i$ и $R_i$ обозначаются как скаляры.
	\item Вычисление скалярного $Q_i$ и ранжирование: после дефаззификации применяются стандартные формулы VIKOR:
	\[
	Q_i = v\frac{S_i - S^\ast}{S^- - S^\ast} + (1-v)\frac{R_i - R^\ast}{R^- - R^\ast},
	\]
	где $S^\ast=\min_i S_i$, $S^-=\max_i S_i$, $R^\ast=\min_i R_i$, $R^-=\max_i R_i$.
	\item Постпроцесс: в коде реализована проверка условий \emph{acceptible advantage} и \emph{stability} и механизм
	\emph{trade-off} (уступки) с пересчётом весов и повторным выполнением шагов агрегации и ранжирования.
\end{enumerate}

\subsubsection{Замечания по параметрам реализации}

\begin{itemize}
	\item \texttt{weights} в реализации ожидаются в виде TFN весов формы $(n,3)$. Если исходные веса заданы как скаляры, их
	можно расширить до TFN, положив все три компоненты равными.
	\item Параметр $v\in[0,1]$ задаёт стратегию компромисса (в коде — аргумент \texttt{v}).
	\item Механизм уступки (trade-off) в коде позволяет задать либо вектор \texttt{tr\_custom\_values}, либо вычислить его автоматически,
	после чего пересчитываются веса и алгоритм прогоняется повторно.
\end{itemize}

Алгоритм был запущен на тестовом наборе (6 альтернатив, 4 критерия, детали см. исходный \texttt{.ipynb}). Для данного прогона получены следующие истинные идеальные и надирные точки (покомпонентно, L/M/U):

\begin{table}[htbp]
  \centering
  \caption{Идеальная и надирная точки (TFN) для примера}
  \label{tab:fuzzy-ideal-nadir}
  \begin{tabular}{lcc}
    \toprule
    Критерий $j$ & $\tilde f_j^{*}$ & $\tilde f_j^{-}$ \\
    \midrule
    1 (затратный) & $(20.00,\;21.06,\;24.00)$ & $(44.54,\;46.89,\;56.27)$ \\
    2 (выгодный)  & $(3.26,\;4.08,\;4.08)$    & $(2.25,\;2.50,\;2.62)$ \\
    3 (затратный) & $(6.00,\;6.00,\;6.00)$    & $(60.00,\;62.00,\;68.00)$ \\
    4 (затратный) & $(0.00,\;0.00,\;0.00)$    & $(10.00,\;10.00,\;10.00)$ \\
    \bottomrule
  \end{tabular}
\end{table}

Из прогона выведены итоговые показатели (дефаззифицированные) и решение:
\begin{itemize}
  \item Допустимое превосходство (acceptable\_advantage): \textbf{True}.
  \item Допустимая стабильность (acceptable\_stability): \textbf{True}.
  \item Компромиссное решение: \textbf{альтернатива A3}.
\end{itemize}

(Полный детализированный вывод — в файле \texttt{.ipynb}; при необходимости можно вставить таблицы с
полными векторами $\tilde S_i$, $\tilde R_i$, $\tilde Q_i$ и их дефаззифицированными значениями.)

\subsubsection{Краткий анализ результатов}

\begin{itemize}
	\item Модификация корректно обрабатывает неопределённость оценок (TFN) — итоговое ранжирование учитывает и
	средние, и крайние оценки альтернатив.
	\item Возможность задания \texttt{tr\_custom\_values} и перерасчёта весов позволяет моделировать различные сценарии trade-off
	и смотреть, как они влияют на итоговый компромисс.
	\item Важно учитывать метод дефаззификации: переход от TFN к скалярам существенно влияет на \(S_i,R_i,Q_i\).
	По умолчанию в литературе используется $(L+M+U)/3$; если в реализации применяется иная формула — это необходимо явно указать и обосновать.
\end{itemize}

\subsubsection{Псевдокод реализованного алгоритма (кратко)}
\begin{enumerate}
	\item Ввести \(\tilde f_{ij}\) и \(\tilde w_j\) (TFN).
	\item Для каждого $j$ вычислить $\tilde f_j^{*}$ и $\tilde f_j^{-}$.
	\item Для всех $i,j$ получить $\tilde d_{ij}$ по формулам (L,M,U).
	\item Вычислить $\tilde S_i$ и $\tilde R_i$ покомпонентно.
	\item Дефаззифицировать $\tilde S_i,\tilde R_i$ в скаляры $S_i,R_i$.
	\item Посчитать $S^{\*}, S^{-}, R^{\*}, R^{-}$ и скалярный $Q_i$; ранжировать.
	\item Проверить условия acceptable advantage / stability и, при необходимости,
		применить trade-off (пересчитать веса и повторить шаги 3–6).
\end{enumerate}


\section{Fuzzy}
В классическом подходе оценочные матрицы и веса являются точными числами, интервальная работает с интервалами. Нечеткая (fuzzy) модификация VIKOR расширяет эти подходы и использует нечеткие числа (лингвистические оценки) для описания неясных, неточных или субъективных данных. Например, эксперт может оценивать критерий как "Высокий", "Средний" или "Низкий", эти термины аппроксимируются нечеткими числами. 

Нечёткое число -- это обобщение обычного (точного) числа, которое позволяет учитывать неопределенность или размытость в значении. Иначе говоря, нечеткое число -- это число, у которого нет одной точной величины, но есть область возможных значений с разной степенью уверенности. Выделяют треугольные и трапециевидные нечеткие числа. Треугольные нечеткие числа $\tilde f=(l,m,h)$, где $l\le m\le h$, наиболее популярны на практике: они просты в использовании и часто задают лингвистические шкалы (см. табл. \ref{lingtab}). Треугольное число задается тройкой $(l,m,h)$ с монотонным ростом функции принадлежности: $l$ -- нижняя граница, $m$ -- среднее пиковое значение (наиболее вероятное), $h$ – верхняя граница. Выделяют также трапециевидное число, которое задается примерно также, но имеет два средних значения, задающих пиковый промежуток.

\begin{table*}[htbp]
	\centering
	\caption{Лингвистическая шкала.}
	\begin{tabular}{|l|l|}
		\hline
		Лингвистическая оценка & Нечеткое представление \\ \hline
		Очень Плохо & (0, 0, 1)  \\ \hline
		Плохо & (0, 1, 3) \\ \hline
		Средне & (1, 3, 5) \\ \hline
		Хорошо & (3, 5, 7) \\ \hline
		Очень хорошо & (5, 7, 9) \\ \hline
		Отлично & (7, 9, 10) \\ \hline
	\end{tabular}
	\label{lingtab}
\end{table*}

Благодаря нечеткости метод может учитывать разброс мнений, повышает устойчивость результатов при неопределенности и близок к реальным условиям принятия решений. Для удобства дальше будем работать с треугольными числами.

Для треугольных чисел выделяют следующие математические операции:

Сумма треугольных чисел: $\sum_{i=1\oplus}^{n} \tilde{N_i} = (\sum_{i=1}^{n} l_i, \sum_{i=1}^{n} m_i, \sum_{i=1}^{n} h_i)$.

Сумма треугольного числа и скаляра: $\tilde{N}\oplus K = (l + K, m+K,h+K)$.

Вычитание: $\tilde{N_1} \ominus \tilde{N_2} = (l_1 - r_2, m_1 - m_2, r_1 - l_2)$.

Вычитание скаляра: $\tilde{N} - K = (l - K, m - K, h - K)$.

Умножение на скаляр: $K\times \tilde{N} = (K\times l, K\times m, K\times h)$, для $K \ge 0$

Умножение: $\tilde{N_1} \otimes \tilde{N_2} = (l_1 \times l_2, m_1 \times m_2, h_1 \times h_2)$.

Деление на скаляр: $ \frac{\tilde{N}}{K} = (\frac{l}{K}, \frac{m}{K}, \frac{h}{K})$.

Оператор MAX: $\underset{i}{MAX} \tilde{N_i} = (\underset{i}{max} l_i,\underset{i}{max} m_i,\underset{i}{max} h_i)$.

Оператор MIN: $\underset{i}{MIN} \tilde{N_i} = (\underset{i}{min} l_i,\underset{i}{min} m_i,\underset{i}{min} h_i)$.



\subsection{Алгоритм Fuzzy VIKOR}
Алгоритм Fuzzy VIKOR расширяет классический, заменяя арифметику на нечеткую и вводя шаг дефаззификации (defuzzification). Основные этапы следующие:

\begin{enumerate}
	\item Формирование нечеткой матрицы. Эксперты дают лингвистические оценки альтернатив по каждому критерию и/или важности критериев. Эти оценки переводятся в нечеткие числа $\tilde f_{ij}=(a_{ij},b_{ij},c_{ij})$ (например, через заранее установленную таблицу соответствия).
	\item Определение весов критериев. Веса $w_j$ либо даны как четкие, либо также как нечеткие числа (например, через консенсус экспертов). Веса нормализуют или агрегируют (методом комплексного среднего, разрежение агрегации и т.п.) в одну нечеткую величину для каждого критерия.
	\item Нечеткие идеальная и надирная точки. Для каждого критерия $j$ вычисляют нечеткую идеальную (наилучшую) $\tilde f_j^*$ и надирную (наихудшую) $\tilde f_j^{\circ}$.
	
	$\tilde{f_i^*} = \underset{j}{MAX} \tilde{f_{ij}}$, $\tilde f_j^{\circ} = \underset{j}{MIN} \tilde{f_{ij}}$ при максимизации критерия.
	
	$\tilde{f_i^*} = \underset{j}{MIN} \tilde{f_{ij}}$, $\tilde f_j^{\circ} = \underset{j}{MAX} \tilde{f_{ij}}$ при минимизации критерия.
	
	\item Нормализация (нечеткие разности). Вычисляют разности для каждой альтернативы $i$ по каждому критерию $j$:
	
	$\tilde{d_{ij}} = (\tilde{f_i} \ominus \tilde{f_{ij}})/(h_i^* - l_i^{\circ})$ при максимизации,
	
	$\tilde{d_{ij}} = (\tilde{f_{ij}} \ominus \tilde{f_{i}})/(h_i^{\circ} - l_i^{*})$ при минимизации,
	
	\item Вычисление S и R (нечеткие показатели). Для каждой альтернативы $j$ вычисляются две агрегированные нечеткие величины:
	
	$\tilde{S_j}=\sum_{i=1\oplus}^{n}(\tilde{w_i} \otimes \tilde{d_{ij}}) $
	
	$\tilde{R_j}=\underset{i}{MAX}(\tilde{w_i} \otimes \tilde{d_{ij}}) $
	где $\tilde{S}$ выражает групповую полезность, $\tilde{R}$ -- индивидуальное сожаление.
	
	\item Вычисление Q (нечеткий индекс). Аналогично классическому варианту вычисляют нечеткий индекс компромисса:
	
	$\tilde{Q_j} = \mu(\tilde{S_j} \ominus \tilde{S^*}) / (S^{\circ h} - S^{*l}) \oplus (1-\mu)(\tilde{R_j} \ominus \tilde{R^*}) / (R^{\circ h} - R^{*l})$,
	
	где $\tilde{S^*} = \underset{j}{MIN} \tilde{S_j}$, $\tilde{S^{\circ h}} = \underset{j}{max} \tilde{S_j^h}$, $\tilde{R^*} = \underset{j}{MIN} \tilde{R_j}$, $\tilde{R^{\circ h}} = \underset{j}{max} \tilde{R_j^h}$, $\mu$ задается пользователем VIKOR и выражает компромисс между стратегиями S и R. 
	
	\item Core ranking. На данном этапе можно произвести первое ранжирование (core ranking) по среднему значению $Q^b$.
	\item Fuzzy ranking. Для нечеткого ранжирования (fuzzy ranking) нужно подтвердить ранжирование из предыдущего пункта. Для того, чтобы подтвердить ранг i-го объекта нужно, чтобы для любого j-го объекта с рангом меньше i-го выполнялось условие $\tilde{Q_i^l} \le \tilde{Q_j^l} \& \tilde{Q_i^m} \le \tilde{Q_j^m} \& \tilde{Q_i^h} \le \tilde{Q_j^h}$.
	
	\item Дефаззификация. Чтобы сравнивать альтернативы, преобразуют нечеткие $\tilde{S_i},\tilde{R_i},\tilde{Q_i}$ в обычные числовые значения. Обычно используют центроиду треугольного числа: для $\tilde Q_i=(l, m, h)$ задают $Q_i^\mathrm{cr}=(l+m+h)/3$. Также может использоваться формула $Q_i^\mathrm{cr}=(l+2m+h)/4$. Аналогично получают $S_i^\mathrm{cr},R_i^\mathrm{cr}$. Этот этап вводит дополнительную процедуру: разные методы дефаззификации могут дать чуть разные ранги, поэтому его выбор влияет на результат.
	\item Ранжирование альтернатив. Альтернативы упорядочивают по возрастанию дефаззифицированных значений $S_i^\mathrm{cr}, R_i^\mathrm{cr}, Q_i^\mathrm{cr}$. Мера $Q^\mathrm{cr}$ считается основной: чем меньше $Q_i^\mathrm{cr}$, тем ближе альтернатива к идеальному.
	\item Выбор компромиссного решения. По тем же правилам, что и в классическом VIKOR: выбирают альтернативу с минимальным $Q_i^\mathrm{cr}$, если выполняются условия достаточного преимущества и стабильности. То есть требуется, чтобы разница $Q_{(2)}^\mathrm{cr}-Q_{(1)}^\mathrm{cr}$ превысила порог $1/(m-1)$ ($m$ – число альтернатив) и лучшая альтернатива была хороша хотя бы по $S$ или $R$. В противном случае выводят несколько компромиссных решений аналогично классической схеме.
\end{enumerate}

Дополнительно может вычисляться уступка (trade-off). Для этого вычисляется значение $tr_i=(D_k*w_i)/(D_i*w_k)$, где $i$ - индекс текущего критерия, $k$ - задаваемый индекс, $i \neq k$. $D_i =f_i^{*h} - f_i^{\circ l}$ для максимизируемого критерия, $D_i =f_i^{\circ h} - f_i^{*l}$ для минимизируемого критерия. Уступка может устанавливаться вручную. Далее вычисляются новые веса по формуле $w’_i=|(D_i * w^\mathrm{cr} * tr_i) / D_k|$. После этого пункты D-K повторяются и определяется новый ранг в соответствии с уступкой. 



























\subsection{Сравнение с базовыми методами}

В среднем по рассматриваемым проектам значения APFD для различных
методов приоритизации распределились следующим образом (по данным
статьи):

\begin{table}[h]
  \centering
  \caption{Средние значения APFD для разных методов}
  \label{tab:apfd-average}
  \begin{tabular}{lc}
    \toprule
    Метод           & Средний APFD \\
    \midrule
    Additional-Diff & 0{,}9805 \\
    Dis-LoM         & 0{,}9727 \\
    Total-Diff      & 0{,}9625 \\
    LoM             & 0{,}9336 \\
    Additional      & 0{,}8656 \\
    Random (avg)    & 0{,}8236 \\
    Total           & 0{,}8062 \\
    \bottomrule
  \end{tabular}
\end{table}

Из таблицы~\ref{tab:apfd-average} видно, что методы, учитывающие diff
(Additional-Diff, Total-Diff), демонстрируют более высокие значения
APFD по сравнению с классическими Total и Additional. Предложенный
метод Dis-LoM оказывается близок к лучшему baseline
Additional-Diff и превосходит остальные методы, в том числе стандартные
coverage-based и случайный порядок.

\subsection{Краткий анализ результатов}

Результаты показывают, что:
\begin{itemize}
  \item интеграция информации о распространении изменений (через цепь
        Маркова) и закона минимума позволяет более точно оценивать
        важность тестов по отношению к изменённому коду;
  \item учёт различий между тестами (Dis-LoM) уменьшает дублирование и
        ускоряет обнаружение дефектов в разных частях системы;
  \item Dis-LoM демонстрирует стабильное улучшение по сравнению с LoM и
        конкурентоспособен с лучшими diff-ориентированными baseline.
\end{itemize}

\section{Выводы}

В работе рассмотрен подход к приоритизации регрессионных тестов,
основанный на сочетании анализа различий, закона минимума и модели
цепей Маркова. В отличие от классических coverage-based методов, данный
подход:
\begin{itemize}
  \item моделирует распространение влияния изменений по графу вызовов;
  \item учитывает чувствительность методов к параметрам через forward slicing;
  \item опирается на закон минимума для выявления ``узких мест'' в покрытии;
  \item снижает избыточность тестов за счёт анализа непохожести покрытия.
\end{itemize}

Экспериментальные результаты, полученные авторами исходной статьи на
наборе Defects4J, показывают, что метрика Dis-LoM обеспечивает высокие
значения APFD и сопоставима с лучшими diff-ориентированными методами,
превосходя при этом классические Total и Additional, а также случайный
порядок.

Перспективными направлениями развития подхода являются:
\begin{itemize}
  \item расширение анализа на другие языки программирования и типы проектов;
  \item интеграция исторической информации о сбоях тестов;
  \item оптимизация вычислительной стоимости построения графов и
        модели цепи Маркова для очень больших систем.
\end{itemize}

\section*{Библиографический список}
\printbibliography
\end{refsection}
\newpage % keep unmodified
